{% extends 'base.html' %}

{% block title %}{{ data.nimi }}{% endblock %}

{% block content %}
<h1>{{ data.nimi }}</h1>

<div class="info-box">
    <p><strong>Saldo:</strong> {{ data.varasto.saldo }}</p>
    <p><strong>Tilavuus:</strong> {{ data.varasto.tilavuus }}</p>
    <p><strong>Tilaa jäljellä:</strong> {{ data.varasto.paljonko_mahtuu() }}</p>
    <div class="progress-bar" style="height: 30px; margin-top: 10px;">
        {% set fill_percent = (data.varasto.saldo / data.varasto.tilavuus * 100) if data.varasto.tilavuus > 0 else 0 %}
        <div class="progress-fill" style="width: {{ fill_percent }}%; line-height: 30px; text-align: center; color: white;">
            {{ "%.1f"|format(fill_percent) }}%
        </div>
    </div>
</div>

<h2>Lisää varastoon</h2>
<form action="{{ url_for('add_to_varasto', varasto_id=varasto_id) }}" method="post" style="display: flex; gap: 10px; align-items: flex-end;">
    <div class="form-group" style="margin-bottom: 0;">
        <label for="add_maara">Määrä:</label>
        <input type="number" id="add_maara" name="maara" min="0.1" step="0.1" value="1" required style="width: 150px;">
    </div>
    <button type="submit" class="btn btn-success">Lisää</button>
</form>

<h2>Ota varastosta</h2>
<form action="{{ url_for('remove_from_varasto', varasto_id=varasto_id) }}" method="post" style="display: flex; gap: 10px; align-items: flex-end;">
    <div class="form-group" style="margin-bottom: 0;">
        <label for="remove_maara">Määrä:</label>
        <input type="number" id="remove_maara" name="maara" min="0.1" step="0.1" value="1" required style="width: 150px;">
    </div>
    <button type="submit" class="btn btn-warning">Ota</button>
</form>

<hr style="margin: 30px 0;">

<a href="{{ url_for('edit_varasto', varasto_id=varasto_id) }}" class="btn btn-primary">Muokkaa nimeä</a>
<form action="{{ url_for('delete_varasto', varasto_id=varasto_id) }}" method="post" style="display: inline;">
    <button type="submit" class="btn btn-danger" onclick="return confirm('Haluatko varmasti poistaa tämän varaston?')">Poista varasto</button>
</form>
<a href="{{ url_for('index') }}" class="btn btn-warning">Takaisin</a>
{% endblock %}
